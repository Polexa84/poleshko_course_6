{% extends "base.html" %}

{% block content %}
  <h1 class="mb-4">Список рассылок (Всего: {{ mailings|length }})</h1>
    <a href="{% url 'mailing:mailing_create' %}" class="btn btn-primary mb-3">  {# Используем namespace #}
      <i class="fas fa-plus"></i> Создать рассылку
    </a>

  <table class="table">
    <thead>
      <tr>
        <th>Дата и время первой отправки</th>
        <th>Дата и время окончания отправки</th>
        <th>Статус</th>
        <th>Сообщение</th>
        <th>Действия</th>
      </tr>
    </thead>
    <tbody>
      {% for mailing in mailings %}
        <tr>
          <td>{{ mailing.start_time }}</td>
          <td>{{ mailing.end_time }}</td>
          <td>{{ mailing.get_status_display }}</td>  <!-- Отображение читаемого статуса -->
          <td>{{ mailing.message.subject }}</td>  <!-- Тема сообщения -->
          <td>
            <a href="{% url 'mailing:mailing_update' mailing.pk %}" class="btn btn-sm btn-warning">Редактировать</a>
            <a href="{% url 'mailing:mailing_delete' mailing.pk %}" class="btn btn-sm btn-danger">Удалить</a>
            <a href="{% url 'mailing:send_mailing' mailing.pk %}" class="btn btn-sm btn-success">Отправить сейчас</a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}